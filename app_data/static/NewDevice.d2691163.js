import{b5 as Ke,b6 as Ye,a5 as ve,u as Xe,P as de,r as J,y as ne,D as ye,b as o,d as me,o as p,Y as j,w as M,b7 as ke,c as N,L as z,a0 as re,a as i,a3 as E,h as ee,a1 as ue,ae as fe,af as Ve,g as _e,_ as oe,E as He,aV as Ue,aT as Ge,b8 as Qe,an as H,q as h,b9 as We,v as Ze,ba as Fe,ax as et,s as Ne,ak as tt,X as Z,a_ as lt,az as le,aA as at,bb as nt,aL as ie,bc as ot,a$ as Be,aF as Re,l as Se,B as ae,bd as it,i as st,be as rt,bf as ut,aQ as dt,T as ct,j as vt,m as mt,bg as ft,bh as _t,n as bt,U as ht,aZ as pt,x as $e,a8 as gt,z as yt,b3 as kt,A as Vt,C as St,O as Ct,J as wt,bi as Te,ay as Ft,aO as Ie,aC as Rt}from"./index.c9dfba26.js";import{g as $t,h as Tt,c as It,b as G,d as Le,e as ze,i as Pt,j as Me,k as xt,l as Ae,n as Ut,o as De,p as Nt,q as Bt,r as Lt,a as zt,s as Mt}from"./VRadioGroup.b2da09aa.js";var se=(t=>(t[t.None=0]="None",t[t.Connect=1]="Connect",t[t.Configure=2]="Configure",t[t.Done=3]="Done",t))(se||{});const be=Ke("new_device",{state:()=>({error_msgs:new Array,show_error:!1,show_error_timeout:null,err_clr_timeout:null,device_id:0,init_state:0,is_idle:!0,device_name:"",module_file:new Array,conn_params:new Array,connect_conf:new Array,conf_info:new Array,confs:new Map}),getters:{start_init_available:t=>t.device_name.length>0&&t.module_file.length==1},actions:{handle_error(t){this.handle_error_raw("["+t.code+"] "+t.msg)},handle_error_raw(t){this.show_error_timeout&&clearTimeout(this.show_error_timeout),this.err_clr_timeout&&clearTimeout(this.err_clr_timeout),this.error_msgs.push(t),this.show_error=!0,this.show_error_timeout=setTimeout(()=>{this.handle_error_close(!1)},5e3)},handle_error_close(t){t||(this.show_error=!1,this.err_clr_timeout=setTimeout(()=>{this.error_msgs=[]},1e3))},async with_error_handling(t){try{await t()}catch(e){e instanceof Ye&&(e.data.msg&&e.data.code?this.handle_error(e.data):this.handle_error_raw("["+e.status+"] "+e.data.toString()))}},conf_by_id(t){const e=this.confs.get(t);return e||(console.error("[conf_by_id]: config with id %d was not found",t),{})},assign_conf(t){t.forEach(e=>{if(e.id==0&&e.data.Section){this.assign_conf(e.data.Section);return}const r=(()=>e.data.String?{String:e.data.String.default?e.data.String.default:""}:e.data.Int?{Int:e.data.Int.default?e.data.Int.default:0}:e.data.IntRange?{IntRange:[e.data.IntRange.def_from!=null?e.data.IntRange.def_from:e.data.IntRange.min,e.data.IntRange.def_to?e.data.IntRange.def_to:e.data.IntRange.max]}:e.data.Float?{Float:e.data.Float.default?e.data.Float.default:0}:e.data.FloatRange?{FloatRange:[e.data.FloatRange.def_from!=null?e.data.FloatRange.def_from:e.data.FloatRange.min,e.data.FloatRange.def_to?e.data.FloatRange.def_to:e.data.FloatRange.max]}:e.data.JSON?{JSON:e.data.JSON.default?e.data.JSON.default:""}:e.data.ChoiceList?{ChoiceList:e.data.ChoiceList.default?e.data.ChoiceList.default:0}:{String:"INVALID_TYPE"})();this.confs.set(e.id,r)})},prepare_conn_conf(){this.conn_params.forEach(t=>{let e=(()=>{switch(t.typ){case"Bool":return{Bool:!1};case"Int":return{Int:0};case"Float":return{Float:0};case"String":return{String:"text"};case"ChoiceList":return{Int:0}}})();this.connect_conf.push({name:t.name,value:e})})},async start_device_init(){this.is_idle=!1;try{const[t,e]=await ve.start_device_init(this.device_name,this.module_file[0]);if(!e)this.handle_error(t);else{let r=t;this.device_id=r.device_id,this.conn_params=r.conn_params,this.prepare_conn_conf(),this.init_state=1}}catch(t){this.handle_error_raw(t.toString())}this.is_idle=!0},async connect_device(){this.is_idle=!1,await this.with_error_handling(async()=>{await ve.connect_device({device_id:this.device_id,connect_conf:this.connect_conf});const t=await ve.obtain_device_conf_info({device_id:this.device_id});this.conf_info=t.data.device_conf_info,this.assign_conf(this.conf_info),this.init_state=2}),this.is_idle=!0},async configure_device(){this.is_idle=!1,await this.with_error_handling(async()=>{let t=new Array;for(const[r,s]of this.confs)t.push({id:r,data:s});await ve.configure_device({device_id:this.device_id,confs:t}),this.init_state=3,Xe().add_device(this.device_id,this.device_name)}),this.is_idle=!0}}}),Ce=de({name:"VForm",props:{...$t()},emits:{"update:modelValue":t=>!0,submit:t=>!0},setup(t,e){let{slots:r,emit:s}=e;const a=Tt(t),l=J();function u(f){f.preventDefault(),a.reset()}function d(f){const S=f,_=a.validate();S.then=_.then.bind(_),S.catch=_.catch.bind(_),S.finally=_.finally.bind(_),s("submit",S),S.defaultPrevented||_.then(A=>{let{valid:B}=A;if(B){var R;(R=l.value)==null||R.submit()}}),S.preventDefault()}return ne(()=>{var f;return o("form",{ref:l,class:"v-form",novalidate:!0,onReset:u,onSubmit:d},[(f=r.default)==null?void 0:f.call(r,a)])}),ye(a,l)}}),At=ee("h1",null,"2. Connect to the device",-1),Dt=me({__name:"Connect",setup(t){const e=be();return(r,s)=>(p(),j(Ce,{disabled:!i(e).is_idle},{default:M(()=>[o(ke,null,{default:M(()=>[At,(p(!0),N(z,null,re(i(e).conn_params,(a,l)=>(p(),N("div",{key:l},[E(" Bool "),a.typ=="Bool"?(p(),j(It,{key:0,label:a.name,modelValue:i(e).connect_conf[l].value.Bool,"onUpdate:modelValue":u=>i(e).connect_conf[l].value.Bool=u},null,8,["label","modelValue","onUpdate:modelValue"])):a.typ=="Int"?(p(),N(z,{key:1},[E(" Int "),o(G,{label:a.name,type:"number",modelValue:i(e).connect_conf[l].value.Int,"onUpdate:modelValue":u=>i(e).connect_conf[l].value.Int=u,modelModifiers:{number:!0}},null,8,["label","modelValue","onUpdate:modelValue"])],2112)):a.typ=="Float"?(p(),N(z,{key:2},[E(" Float "),o(G,{label:a.name,type:"number",modelValue:i(e).connect_conf[l].value.Float,"onUpdate:modelValue":u=>i(e).connect_conf[l].value.Float=u,modelModifiers:{number:!0}},null,8,["label","modelValue","onUpdate:modelValue"])],2112)):a.typ=="String"?(p(),N(z,{key:3},[E(" String "),o(G,{label:a.name,modelValue:i(e).connect_conf[l].value.String,"onUpdate:modelValue":u=>i(e).connect_conf[l].value.String=u},null,8,["label","modelValue","onUpdate:modelValue"])],2112)):a.typ=="ChoiceList"?(p(),N(z,{key:4},[E(" ChoiceList "),o(Le,{modelValue:i(e).connect_conf[l].value.Int,"onUpdate:modelValue":u=>i(e).connect_conf[l].value.Int=u,modelModifiers:{number:!0}},{default:M(()=>[ee("p",null,ue(a.name),1),(p(!0),N(z,null,re(a.info.ChoiceList.choices,(u,d)=>(p(),j(ze,{key:d,label:u,value:d},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])],2112)):E("v-if",!0)]))),128)),o(fe,{loading:!i(e).is_idle,disabled:!i(e).start_init_available||!i(e).is_idle,onClick:s[0]||(s[0]=Ve(a=>i(e).connect_device(),["stop"]))},{default:M(()=>[_e("Connect")]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["disabled"]))}}),Ot=oe(Dt,[["__file","/Users/daniildirun/dev/monisens-frontend/src/views/new_device/Connect.vue"]]),Et={name:"RangePicker",props:{step:Number,min:Number,max:Number,modelValue:null,label:String},computed:{inputVal:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}},emits:["update:modelValue"]};const we=Symbol.for("vuetify:v-slider");function ge(t,e,r){const s=r==="vertical",a=e.getBoundingClientRect(),l="touches"in t?t.touches[0]:t;return s?l.clientY-(a.top+a.height/2):l.clientX-(a.left+a.width/2)}function jt(t,e){return"touches"in t&&t.touches.length?t.touches[0][e]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0][e]:t[e]}const qt=He({disabled:Boolean,error:Boolean,readonly:Boolean,max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:t=>typeof t=="boolean"||t==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:t=>typeof t=="boolean"||t==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:t=>["vertical","horizontal"].includes(t)},reverse:Boolean,...Ue(),...Ge({elevation:2})},"slider"),Jt=t=>{let{props:e,handleSliderMouseUp:r,handleMouseMove:s,getActiveThumb:a}=t;const{isRtl:l}=Qe(),u=H(e,"reverse"),d=h(()=>{let n=l.value?"rtl":"ltr";return e.reverse&&(n=n==="rtl"?"ltr":"rtl"),n}),f=h(()=>parseFloat(e.min)),S=h(()=>parseFloat(e.max)),_=h(()=>e.step>0?parseFloat(e.step):0),A=h(()=>{const n=_.value.toString().trim();return n.includes(".")?n.length-n.indexOf(".")-1:0}),B=h(()=>parseInt(e.thumbSize,10)),R=h(()=>parseInt(e.tickSize,10)),$=h(()=>parseInt(e.trackSize,10)),T=h(()=>(S.value-f.value)/_.value),D=H(e,"disabled"),c=h(()=>e.direction==="vertical"),q=h(()=>{var n;return e.error||e.disabled?void 0:(n=e.thumbColor)!=null?n:e.color}),K=h(()=>{var n;return e.error||e.disabled?void 0:(n=e.trackColor)!=null?n:e.color}),X=h(()=>{var n;return e.error||e.disabled?void 0:(n=e.trackFillColor)!=null?n:e.color}),v=J(!1),y=J(0),m=J(),g=J();function I(n){if(_.value<=0)return n;const x=Fe(n,f.value,S.value),W=f.value%_.value,he=Math.round((x-W)/_.value)*_.value+W;return parseFloat(Math.min(he,S.value).toFixed(A.value))}function w(n){var x;const W=e.direction==="vertical",he=W?"top":"left",Oe=W?"height":"width",Ee=W?"clientY":"clientX",{[he]:je,[Oe]:qe}=(x=m.value)==null?void 0:x.$el.getBoundingClientRect(),Je=jt(n,Ee);let pe=Math.min(Math.max((Je-je-y.value)/qe,0),1)||0;return(W||d.value==="rtl")&&(pe=1-pe),I(f.value+pe*(S.value-f.value))}let C=!1;const b=n=>{C||(y.value=0,r(w(n))),v.value=!1,C=!1,y.value=0},F=n=>{g.value=a(n),g.value&&(g.value.focus(),v.value=!0,g.value.contains(n.target)?(C=!0,y.value=ge(n,g.value,e.direction)):(y.value=0,s(w(n))))},U={passive:!0,capture:!0};function P(n){C=!0,s(w(n))}function k(n){n.stopPropagation(),n.preventDefault(),b(n),window.removeEventListener("mousemove",P,U),window.removeEventListener("mouseup",k)}function V(n){var x;b(n),window.removeEventListener("touchmove",P,U),(x=n.target)==null||x.removeEventListener("touchend",V)}function O(n){var x;F(n),window.addEventListener("touchmove",P,U),(x=n.target)==null||x.addEventListener("touchend",V,{passive:!1})}function L(n){n.preventDefault(),F(n),window.addEventListener("mousemove",P,U),window.addEventListener("mouseup",k,{passive:!1})}const Q=n=>{const x=(n-f.value)/(S.value-f.value)*100;return Fe(isNaN(x)?0:x,0,100)},te=h(()=>e.ticks?Array.isArray(e.ticks)?e.ticks.map(n=>({value:n,position:Q(n),label:n.toString()})):Object.keys(e.ticks).map(n=>({value:parseFloat(n),position:Q(parseFloat(n)),label:e.ticks[n]})):T.value!==1/0?We(T.value+1).map(n=>{const x=f.value+n*_.value;return{value:x,position:Q(x)}}):[]),Y=h(()=>te.value.some(n=>{let{label:x}=n;return!!x})),ce={activeThumbRef:g,color:H(e,"color"),decimals:A,disabled:D,direction:H(e,"direction"),elevation:H(e,"elevation"),hasLabels:Y,horizontalDirection:d,isReversed:u,min:f,max:S,mousePressed:v,numTicks:T,onSliderMousedown:L,onSliderTouchstart:O,parsedTicks:te,parseMouseMove:w,position:Q,readonly:H(e,"readonly"),rounded:H(e,"rounded"),roundValue:I,showTicks:H(e,"showTicks"),startOffset:y,step:_,thumbSize:B,thumbColor:q,thumbLabel:H(e,"thumbLabel"),ticks:H(e,"ticks"),tickSize:R,trackColor:K,trackContainerRef:m,trackFillColor:X,trackSize:$,vertical:c};return Ze(we,ce),ce};const Pe=de({name:"VSliderThumb",directives:{Ripple:et},props:{focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:Boolean,default:!0}},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:r,emit:s}=e;const a=Ne(we);if(!a)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:l,step:u,vertical:d,disabled:f,thumbSize:S,thumbLabel:_,direction:A,readonly:B,elevation:R,isReversed:$,horizontalDirection:T,mousePressed:D,decimals:c}=a,{textColorClasses:q,textColorStyles:K}=tt(l),{pageup:X,pagedown:v,end:y,home:m,left:g,right:I,down:w,up:C}=ot,b=[X,v,y,m,g,I,w,C],F=h(()=>u.value?[1,2,3]:[1,5,10]);function U(k,V){if(!b.includes(k.key))return;k.preventDefault();const O=u.value||.1,L=(t.max-t.min)/O;if([g,I,w,C].includes(k.key)){const te=(T.value==="rtl"?[g,C]:[I,C]).includes(k.key)?1:-1,Y=k.shiftKey?2:k.ctrlKey?1:0;V=V+te*O*F.value[Y]}else if(k.key===m)V=t.min;else if(k.key===y)V=t.max;else{const Q=k.key===v?1:-1;V=V-Q*O*(L>100?L/10:10)}return Math.max(t.min,Math.min(t.max,V))}function P(k){const V=U(k,t.modelValue);V!=null&&s("update:modelValue",V)}return ne(()=>{var k;const V=Z(d.value||$.value?100-t.position:t.position,"%"),{elevationClasses:O}=lt(h(()=>f.value?void 0:R.value));return o("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":t.focused,"v-slider-thumb--pressed":t.focused&&D.value}],style:{"--v-slider-thumb-position":V,"--v-slider-thumb-size":Z(S.value)},role:"slider",tabindex:f.value?-1:0,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.modelValue,"aria-readonly":B.value,"aria-orientation":A.value,onKeydown:B.value?void 0:P},[o("div",{class:["v-slider-thumb__surface",q.value,O.value],style:{...K.value}},null),le(o("div",{class:["v-slider-thumb__ripple",q.value],style:K.value},null),[[at("ripple"),t.ripple,null,{circle:!0,center:!0}]]),o(nt,{origin:"bottom center"},{default:()=>{var L;return[le(o("div",{class:"v-slider-thumb__label-container"},[o("div",{class:["v-slider-thumb__label"]},[o("div",null,[(L=(k=r["thumb-label"])==null?void 0:k.call(r,{modelValue:t.modelValue}))!=null?L:t.modelValue.toFixed(u.value?c.value:1)])])]),[[ie,_.value&&t.focused||_.value==="always"]])]}})])}),{}}});const Kt=de({name:"VSliderTrack",props:{start:{type:Number,required:!0},stop:{type:Number,required:!0}},emits:{},setup(t,e){let{slots:r}=e;const s=Ne(we);if(!s)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:a,horizontalDirection:l,parsedTicks:u,rounded:d,showTicks:f,tickSize:S,trackColor:_,trackFillColor:A,trackSize:B,vertical:R,min:$,max:T}=s,{roundedClasses:D}=Be(d),{backgroundColorClasses:c,backgroundColorStyles:q}=Re(A),{backgroundColorClasses:K,backgroundColorStyles:X}=Re(_),v=h(()=>`inset-${R.value?"block-end":"inline-start"}`),y=h(()=>R.value?"height":"width"),m=h(()=>({[v.value]:"0%",[y.value]:"100%"})),g=h(()=>t.stop-t.start),I=h(()=>({[v.value]:Z(t.start,"%"),[y.value]:Z(g.value,"%")})),w=h(()=>(R.value?u.value.slice().reverse():u.value).map((b,F)=>{var V;var U;const P=R.value?"bottom":"margin-inline-start",k=b.value!==$.value&&b.value!==T.value?Z(b.position,"%"):void 0;return o("div",{key:b.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":b.position>=t.start&&b.position<=t.stop,"v-slider-track__tick--first":b.value===$.value,"v-slider-track__tick--last":b.value===T.value}],style:{[P]:k}},[(b.label||r["tick-label"])&&o("div",{class:"v-slider-track__tick-label"},[(V=(U=r["tick-label"])==null?void 0:U.call(r,{tick:b,index:F}))!=null?V:b.label])])}));return ne(()=>o("div",{class:["v-slider-track",D.value],style:{"--v-slider-track-size":Z(B.value),"--v-slider-tick-size":Z(S.value),direction:R.value?void 0:l.value}},[o("div",{class:["v-slider-track__background",K.value,{"v-slider-track__background--opacity":!!a.value||!A.value}],style:{...m.value,...X.value}},null),o("div",{class:["v-slider-track__fill",c.value],style:{...I.value,...q.value}},null),f.value&&o("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":f.value==="always"}]},[w.value])])),{}}}),Yt=de({name:"VRangeSlider",props:{...Pt(),...Me(),...qt(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},emits:{"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{slots:r}=e;const s=J(),a=J(),l=J();function u(m){if(!s.value||!a.value)return;const g=ge(m,s.value.$el,t.direction),I=ge(m,a.value.$el,t.direction),w=Math.abs(g),C=Math.abs(I);return w<C||w===C&&g<0?s.value.$el:a.value.$el}const{activeThumbRef:d,hasLabels:f,max:S,min:_,mousePressed:A,onSliderMousedown:B,onSliderTouchstart:R,position:$,roundValue:T,trackContainerRef:D}=Jt({props:t,handleSliderMouseUp:m=>{var g;c.value=d.value===((g=s.value)==null?void 0:g.$el)?[m,c.value[1]]:[c.value[0],m]},handleMouseMove:m=>{var g;const[I,w]=c.value;if(!t.strict&&I===w&&I!==_.value){var C,b,F;d.value=m>I?(C=a.value)==null?void 0:C.$el:(b=s.value)==null?void 0:b.$el,(F=d.value)==null||F.focus()}d.value===((g=s.value)==null?void 0:g.$el)?c.value=[Math.min(m,w),w]:c.value=[I,Math.max(I,m)]},getActiveThumb:u}),c=Se(t,"modelValue",void 0,m=>!m||!m.length?[0,0]:m.map(g=>T(g))),{isFocused:q,focus:K,blur:X}=xt(t),v=h(()=>$(c.value[0])),y=h(()=>$(c.value[1]));return ne(()=>{const[m,g]=Ae(t),I=!!(t.label||r.label||r.prepend);return o(De,ae({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!r["tick-label"]||f.value,"v-slider--focused":q.value,"v-slider--pressed":A.value,"v-slider--disabled":t.disabled}],ref:l},m,{focused:q.value}),{...r,prepend:I?w=>{var F;var C,b;return o(z,null,[((F=(C=r.label)==null?void 0:C.call(r,w))!=null?F:t.label)?o(Ut,{class:"v-slider__label",text:t.label},null):void 0,(b=r.prepend)==null?void 0:b.call(r,w)])}:void 0,default:w=>{var C,b;let{id:F,messagesId:U}=w;return o("div",{class:"v-slider__container",onMousedown:B,onTouchstartPassive:R},[o("input",{id:`${F.value}_start`,name:t.name||F.value,disabled:t.disabled,readonly:t.readonly,tabindex:"-1",value:c.value[0]},null),o("input",{id:`${F.value}_stop`,name:t.name||F.value,disabled:t.disabled,readonly:t.readonly,tabindex:"-1",value:c.value[1]},null),o(Kt,{ref:D,start:v.value,stop:y.value},{"tick-label":r["tick-label"]}),o(Pe,{ref:s,"aria-describedby":U.value,focused:q&&d.value===((C=s.value)==null?void 0:C.$el),modelValue:c.value[0],"onUpdate:modelValue":P=>c.value=[P,c.value[1]],onFocus:P=>{var k,V;if(K(),d.value=(k=s.value)==null?void 0:k.$el,c.value[0]===c.value[1]&&c.value[1]===_.value&&P.relatedTarget!==((V=a.value)==null?void 0:V.$el)){var O,L;(O=s.value)==null||O.$el.blur(),(L=a.value)==null||L.$el.focus()}},onBlur:()=>{X(),d.value=void 0},min:_.value,max:c.value[1],position:v.value},{"thumb-label":r["thumb-label"]}),o(Pe,{ref:a,"aria-describedby":U.value,focused:q&&d.value===((b=a.value)==null?void 0:b.$el),modelValue:c.value[1],"onUpdate:modelValue":P=>c.value=[c.value[0],P],onFocus:P=>{var k,V;if(K(),d.value=(k=a.value)==null?void 0:k.$el,c.value[0]===c.value[1]&&c.value[0]===S.value&&P.relatedTarget!==((V=s.value)==null?void 0:V.$el)){var O,L;(O=a.value)==null||O.$el.blur(),(L=s.value)==null||L.$el.focus()}},onBlur:()=>{X(),d.value=void 0},min:c.value[0],max:S.value,position:y.value},{"thumb-label":r["thumb-label"]})])}})}),{}}}),Xt={key:0,style:{"padding-bottom":"20px"}};function Ht(t,e,r,s,a,l){return p(),N(z,null,[r.label?(p(),N("h3",Xt,ue(r.label),1)):E("v-if",!0),o(Yt,{modelValue:l.inputVal,"onUpdate:modelValue":e[2]||(e[2]=u=>l.inputVal=u),min:r.min,max:r.max,step:r.step},{prepend:M(()=>[o(G,{modelValue:l.inputVal[0],"onUpdate:modelValue":e[0]||(e[0]=u=>l.inputVal[0]=u),"hide-details":"","single-line":"",type:"number",variant:"outlined",density:"compact",style:{width:"120px"}},null,8,["modelValue"])]),append:M(()=>[o(G,{modelValue:l.inputVal[1],"onUpdate:modelValue":e[1]||(e[1]=u=>l.inputVal[1]=u),"hide-details":"","single-line":"",type:"number",variant:"outlined",density:"compact",style:{width:"120px"}},null,8,["modelValue"])]),_:1},8,["modelValue","min","max","step"])],64)}const xe=oe(Et,[["render",Ht],["__file","/Users/daniildirun/dev/monisens-frontend/src/components/new_device/RangePicker.vue"]]),Gt={key:0},Qt={name:"ConfigureSection",props:{name:String,conf_info:Object}},Wt=me({...Qt,setup(t){const e=be();return(r,s)=>{const a=it("ConfigureSection",!0);return p(),N(z,null,[t.name?(p(),N("h2",Gt,ue(t.name),1)):E("v-if",!0),(p(!0),N(z,null,re(t.conf_info,(l,u)=>(p(),j(ke,{key:u},{default:M(()=>[l.data.String?(p(),j(G,{key:0,label:l.name,modelValue:i(e).conf_by_id(l.id).String,"onUpdate:modelValue":d=>i(e).conf_by_id(l.id).String=d},null,8,["label","modelValue","onUpdate:modelValue"])):l.data.Int?(p(),j(G,{key:1,label:l.name,type:"number",modelValue:i(e).conf_by_id(l.id).Int,"onUpdate:modelValue":d=>i(e).conf_by_id(l.id).Int=d,modelModifiers:{number:!0}},null,8,["label","modelValue","onUpdate:modelValue"])):l.data.IntRange?(p(),j(xe,{key:2,modelValue:i(e).conf_by_id(l.id).IntRange,"onUpdate:modelValue":d=>i(e).conf_by_id(l.id).IntRange=d,label:l.name,step:1,min:l.data.IntRange.min,max:l.data.IntRange.max},null,8,["modelValue","onUpdate:modelValue","label","min","max"])):l.data.Float?(p(),j(G,{key:3,label:l.name,type:"number",modelValue:i(e).conf_by_id(l.id).Float,"onUpdate:modelValue":d=>i(e).conf_by_id(l.id).Float=d,modelModifiers:{number:!0}},null,8,["label","modelValue","onUpdate:modelValue"])):l.data.FloatRange?(p(),j(xe,{key:4,modelValue:i(e).conf_by_id(l.id).FloatRange,"onUpdate:modelValue":d=>i(e).conf_by_id(l.id).FloatRange=d,label:l.name,step:.001,min:l.data.FloatRange.min,max:l.data.FloatRange.max},null,8,["modelValue","onUpdate:modelValue","label","step","min","max"])):E("v-if",!0),l.data.JSON?(p(),j(G,{key:5,label:l.name,modelValue:i(e).conf_by_id(l.id).JSON,"onUpdate:modelValue":d=>i(e).conf_by_id(l.id).JSON=d},null,8,["label","modelValue","onUpdate:modelValue"])):l.data.ChoiceList?(p(),j(Le,{key:6,modelValue:i(e).conf_by_id(l.id).ChoiceList,"onUpdate:modelValue":d=>i(e).conf_by_id(l.id).ChoiceList=d,modelModifiers:{number:!0}},{default:M(()=>[ee("p",null,ue(l.name),1),(p(!0),N(z,null,re(l.data.ChoiceList.choices,(d,f)=>(p(),j(ze,{key:f,label:d,value:f},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):l.data.Section?(p(),j(a,{key:7,conf_info:l.data.Section,name:l.name},null,8,["conf_info","name"])):E("v-if",!0)]),_:2},1024))),128))],64)}}}),Zt=oe(Wt,[["__file","/Users/daniildirun/dev/monisens-frontend/src/components/new_device/ConfigureSection.vue"]]),el=ee("h1",null,"3. Configure device",-1),tl=me({__name:"Configure",setup(t){const e=be();return(r,s)=>(p(),j(Ce,{disabled:!i(e).is_idle},{default:M(()=>[el,o(Zt,{conf_info:i(e).conf_info},null,8,["conf_info"]),o(fe,{loading:!i(e).is_idle,disabled:!i(e).start_init_available||!i(e).is_idle,onClick:s[0]||(s[0]=Ve(a=>i(e).configure_device(),["stop"]))},{default:M(()=>[_e("Configure")]),_:1},8,["loading","disabled"])]),_:1},8,["disabled"]))}}),ll=oe(tl,[["__file","/Users/daniildirun/dev/monisens-frontend/src/views/new_device/Configure.vue"]]),al={name:"ErrorSnack",props:{modelValue:Boolean,msgs:Array},emits:["update:modelValue"]};const nl=st()({name:"VSnackbar",props:{multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...rt({location:"bottom"}),...ut(),...Ue(),...dt(),...ct(),...vt(mt({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:r}=e;const s=Se(t,"modelValue"),{locationStyles:a}=ft(t),{positionClasses:l}=_t(t),{scopeId:u}=bt(),{themeClasses:d}=ht(t),{colorClasses:f,colorStyles:S,variantClasses:_}=pt(t),{roundedClasses:A}=Be(t),B=J();$e(s,$),$e(()=>t.timeout,$),gt(()=>{s.value&&$()});let R=-1;function $(){window.clearTimeout(R);const D=Number(t.timeout);!s.value||D===-1||(R=window.setTimeout(()=>{s.value=!1},D))}function T(){window.clearTimeout(R)}return ne(()=>{const[D]=yt(t);return o(St,ae({ref:B,class:["v-snackbar",{"v-snackbar--active":s.value,"v-snackbar--multi-line":t.multiLine&&!t.vertical,"v-snackbar--vertical":t.vertical},l.value]},D,{modelValue:s.value,"onUpdate:modelValue":c=>s.value=c,contentProps:ae({style:a.value},D.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none"},u),{default:()=>[o("div",{class:["v-snackbar__wrapper",d.value,f.value,A.value,_.value],style:[S.value],onPointerenter:T,onPointerleave:$},[kt(!1,"v-snackbar"),r.default&&o("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[r.default()]),r.actions&&o(Vt,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[o("div",{class:"v-snackbar__actions"},[r.actions()])]})])],activator:r.activator})}),ye({},B)}}),ol={style:{"text-align":"center"}};function il(t,e,r,s,a,l){return p(),N("div",ol,[o(nl,{timeout:-1,modelValue:r.modelValue,"onUpdate:modelValue":e[1]||(e[1]=u=>t.$emit("update:modelValue",u.valueOf())),color:"red-darken-2",timer:!0},{actions:M(()=>[o(fe,{text:"",onClick:e[0]||(e[0]=u=>t.$emit("update:modelValue",!1))},{default:M(()=>[_e(" Close ")]),_:1})]),default:M(()=>[(p(!0),N(z,null,re(r.msgs,(u,d)=>(p(),N("ul",{key:d},[ee("li",null,ue(u),1)]))),128))]),_:1},8,["modelValue"])])}const sl=oe(al,[["render",il],["__file","/Users/daniildirun/dev/monisens-frontend/src/components/common/ErrorSnack.vue"]]);const rl=de({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:t=>typeof t=="boolean"||[1e3,1024].includes(t)},...Me({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:t=>Ct(t).every(e=>e!=null&&typeof e=="object")},...Nt({clearable:!0})},emits:{"click:control":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:r,emit:s,slots:a}=e;const{t:l}=wt(),u=Se(t,"modelValue"),d=h(()=>typeof t.showSize!="boolean"?t.showSize:void 0),f=h(()=>{var v;return((v=u.value)!=null?v:[]).reduce((y,m)=>{let{size:g=0}=m;return y+g},0)}),S=h(()=>Te(f.value,d.value)),_=h(()=>{var v;return((v=u.value)!=null?v:[]).map(y=>{const{name:m="",size:g=0}=y;return t.showSize?`${m} (${Te(g,d.value)})`:m})}),A=h(()=>{var m;var v;const y=(m=(v=u.value)==null?void 0:v.length)!=null?m:0;return t.showSize?l(t.counterSizeString,y,S.value):l(t.counterString,y)}),B=J(),R=J(),$=J(!1),T=J(),D=h(()=>t.messages.length?t.messages:t.persistentHint?t.hint:"");function c(){if(T.value!==document.activeElement){var v;(v=T.value)==null||v.focus()}$.value||($.value=!0)}function q(v){Ie(t["onClick:prepend"],v),K(v)}function K(v){var y;(y=T.value)==null||y.click(),s("click:control",v)}function X(v){v.stopPropagation(),c(),Rt(()=>{u.value=[],T!=null&&T.value&&(T.value.value=""),Ie(t["onClick:clear"],v)})}return ne(()=>{const v=!!(a.counter||t.counter),y=!!(v||a.details),[m,g]=Ft(r),[{modelValue:I,...w}]=Ae(t),[C]=Bt(t);return o(De,ae({ref:B,modelValue:u.value,"onUpdate:modelValue":b=>u.value=b,class:"v-file-input","onClick:prepend":q,"onClick:append":t["onClick:append"]},m,w,{focused:$.value,messages:D.value}),{...a,default:b=>{let{id:F,isDisabled:U,isDirty:P,isReadonly:k,isValid:V}=b;return o(Lt,ae({ref:R,"prepend-icon":t.prependIcon,"onClick:control":K,"onClick:clear":X,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"]},C,{id:F.value,active:P.value||$.value,dirty:P.value,focused:$.value,error:V.value===!1}),{...a,default:O=>{var L;let{props:{class:Q,...te}}=O;return o(z,null,[o("input",ae({ref:T,type:"file",readonly:k.value,disabled:U.value,multiple:t.multiple,name:t.name,onClick:Y=>{Y.stopPropagation(),c()},onChange:Y=>{var n;if(!Y.target)return;const ce=Y.target;u.value=[...(n=ce.files)!=null?n:[]]},onFocus:c,onBlur:()=>$.value=!1},te,g),null),o("div",{class:Q},[!!((L=u.value)!=null&&L.length)&&(a.selection?a.selection({fileNames:_.value,totalBytes:f.value,totalBytesReadable:S.value}):t.chips?_.value.map(Y=>o(zt,{key:Y,size:"small",color:t.color},{default:()=>[Y]})):_.value.join(", "))])])}})},details:y?b=>{var F,U;return o(z,null,[(F=a.details)==null?void 0:F.call(a,b),v&&o(z,null,[o("span",null,null),o(Mt,{active:!!((U=u.value)!=null&&U.length),value:A.value},a.counter)])])}:void 0})}),ye({},B,R,T)}}),ul=ee("h1",null,"1. Start initialization",-1),dl=me({__name:"NewDevice",setup(t){const e=be();return(r,s)=>(p(),N(z,null,[E(" Error Snackbar "),o(sl,{modelValue:i(e).show_error,"onUpdate:modelValue":s[0]||(s[0]=a=>i(e).handle_error_close(a.valueOf())),msgs:i(e).error_msgs},null,8,["modelValue","msgs"]),E(" Start init "),le(o(Ce,{disabled:!i(e).is_idle},{default:M(()=>[o(ke,null,{default:M(()=>[ul,o(G,{label:"Device name",modelValue:i(e).device_name,"onUpdate:modelValue":s[1]||(s[1]=a=>i(e).device_name=a),active:i(e).is_idle},null,8,["modelValue","active"]),o(rl,{label:"Device's module file",modelValue:i(e).module_file,"onUpdate:modelValue":s[2]||(s[2]=a=>i(e).module_file=a)},null,8,["modelValue"]),o(fe,{loading:!i(e).is_idle,disabled:!i(e).start_init_available||!i(e).is_idle,onClick:s[3]||(s[3]=Ve(a=>i(e).start_device_init(),["stop"]))},{default:M(()=>[_e("Start Init")]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["disabled"]),[[ie,i(e).init_state==i(se).None]]),E(" Connect "),le(o(Ot,null,null,512),[[ie,i(e).init_state==i(se).Connect]]),E(" Configure "),le(o(ll,null,null,512),[[ie,i(e).init_state==i(se).Configure]]),E(" Done "),le(ee("h1",null," You're all set! ",512),[[ie,i(e).init_state==i(se).Done]])],64))}}),ml=oe(dl,[["__file","/Users/daniildirun/dev/monisens-frontend/src/views/new_device/NewDevice.vue"]]);export{ml as default};
